# 🎭 角色改造方案：张三、李四、王五 → 老年、青年、中年李白

## 📋 改造概览

### 角色分配方案

| 原角色 | 改造为 | 时期 | 年龄 | 对应场景 |
|--------|--------|------|------|----------|
| **张三** | **老年李白** | 50-62岁 | 750-762年 | 流放夜郎、江陵、当涂 |
| **李四** | **青年李白** | 25-35岁 | 725-735年 | 蜀中故乡、江南水乡、名山大川 |
| **王五** | **中年李白** | 35-50岁 | 735-750年 | 长安皇宫、长安市集、梁园 |

### 改造内容

1. **视觉形象**：生成符合各时期特征的像素艺术角色精灵图
2. **角色配置**：更新后端NPC配置，匹配李白各时期的人物设定
3. **场景匹配**：将角色放置在对应的历史场景中

---

## 🎨 第一部分：视觉形象改造

### 📐 精灵表结构说明

根据 `npc.tscn` 和 `character_2.png` 的分析，精灵表布局如下：

```
精灵表布局 (character_2.png):
┌─────────────────────────────────────────┐
│                                         │
│  Idle (y=595)                          │ ← 12帧，48x80像素
│  x: 0, 48, 96, 144, 192, 240,          │
│     288, 336, 384, 432, 480, 528       │
├─────────────────────────────────────────┤
│ Walk Right │ Walk Up │ Walk Left │ Walk Down │ ← 各6帧，48x70像素
│ (x=0)      │ (x=288) │ (x=576)   │ (x=864)    │
│            │         │           │            │
│ 6帧        │ 6帧     │ 6帧       │ 6帧        │
└─────────────────────────────────────────┘
```

**重要尺寸**：
- **Idle动画**：48 x 80 像素，12帧
- **Walk动画**：48 x 70 像素，每个方向6帧（共24帧）

---

## 🍂 一、张三 → 老年李白（50-62岁）

### 📖 角色背景

**历史时期**：750-762年（安史之乱后）
- 757年：因永王李璘案被流放夜郎
- 759年：遇赦返回
- 晚年漂泊，生活困顿，但创作不辍

**对应场景**：
- 流放夜郎（贵州，757-759年）
- 江陵（湖北，759年后）
- 当涂（安徽，762年）

### 🎨 视觉特征

**外貌**：
- 50-62岁老年男性
- 面容沧桑，长须（可能更白或更乱）
- 眼神深邃，有岁月痕迹
- 偏瘦，可能有些佝偻，但姿态依然优雅

**服饰**：
- 唐代文人长袍，但更简朴、破旧
- 颜色：灰色、棕色、淡青色为主（简朴暗淡）
- 宽袖，但可能有些磨损
- 简单的头巾或帽子，简单的腰带
- 布鞋，可能有些破旧

**手持物品**：
- 主要：右手持酒壶（可能更简朴）
- 备选：可能手持拐杖、书卷，或简单的行囊

**色彩氛围**：
- 主色调：灰色、棕色、淡青色（简朴、沧桑）
- 辅助色：白色、青色（坚持、精神）
- 整体：沧桑、思考、感悟

### 📝 AI生成提示词

#### 1. Idle 动画（12帧，48x80像素）

```
请创建一张像素艺术精灵表，包含12帧idle（站立待机）动画，横向排列在一张图片中。

【整体要求】
- 图片尺寸：576 x 80 像素（12帧 × 48像素宽 × 80像素高）
- 背景：完全透明（PNG格式，RGBA模式）
- 风格：像素艺术，简洁色彩（16-32色），清晰线条，无抗锯齿

【角色设定 - 老年时期李白】
- 角色：中国古代诗人李白，50-62岁老年男性，面容沧桑，长须（可能更白或更乱），眼神深邃，有岁月痕迹
- 气质：沧桑但坚韧，有智慧，充满人生感悟，精神不衰，体现晚年诗人的坚韧
- 身材：偏瘦，可能有些佝偻，但姿态依然优雅
- 服饰：唐代文人长袍，但可能更简朴、破旧，体现流放和漂泊，以灰色、棕色、淡青色为主，简朴暗淡
- 配饰：简单的头巾或帽子，可能有简单的腰带，体现简朴的生活
- 手持：右手持酒壶（可能更简朴），体现诗人好酒的特点，或可能手持拐杖、书卷，或简单的行囊
- 鞋子：布鞋，可能有些破旧，适合长途漂泊

【动画帧描述】
帧1：站立待机，身体中心位置，轻微呼吸，胸部略微起伏，可能有些佝偻，右手持酒壶或拐杖，眼神深邃，有岁月痕迹，但精神不衰
帧2：身体略微下沉，呼吸动作，肩膀轻微起伏，长袍随呼吸轻微摆动，保持优雅姿态，但可能有些疲惫
帧3：身体回到中心，可能轻微向左摆动，长袖随风轻摆，眼神可能看向远方，体现对人生的思考
帧4：身体回到中心位置，可能轻微向右摆动，保持平衡，手持酒壶或拐杖，姿态自然，体现坚韧的精神
帧5：身体回到中心，呼吸动作，可能眨眼，长袍静止，准备回到起始状态，眼神深邃，充满人生感悟
帧6：身体略微前倾，可能看向手中的酒壶或书卷，体现晚年诗人的沉思
帧7：身体回到中心，轻微呼吸，长袍随呼吸摆动，保持优雅但沧桑的姿态
帧8：身体略微后仰，可能看向天空或远方，体现对人生的感悟
帧9：身体回到中心，呼吸动作，眼神深邃，有智慧的光芒
帧10：身体轻微摆动，长袖轻摆，保持平衡，体现坚韧的精神
帧11：身体回到中心，准备回到起始状态，眼神依然深邃
帧12：回到起始位置，完成一个完整的呼吸循环，与第1帧无缝衔接，形成流畅循环

【技术要求】
- 每帧尺寸：48 x 80 像素
- 12帧横向排列，从左到右
- 帧与帧之间无缝衔接，形成流畅的循环动画
- 透明背景，无任何背景色或背景图案
- 像素艺术风格，使用最近邻插值，保持清晰锐利的边缘
- 俯视角，显示角色正面
- 色彩：简朴暗淡（灰色、棕色、淡青色为主）
```

#### 2. Walk Down 动画（6帧，48x70像素）

```
请创建一张像素艺术精灵表，包含6帧walk down（向下行走）动画，横向排列在一张图片中。

【整体要求】
- 图片尺寸：288 x 70 像素（6帧 × 48像素宽 × 70像素高）
- 背景：完全透明（PNG格式，RGBA模式）
- 风格：像素艺术，简洁色彩（16-32色），清晰线条，无抗锯齿

【角色设定 - 老年时期李白】
- 角色：中国古代诗人李白，50-62岁老年男性，面容沧桑，长须（可能更白或更乱），眼神深邃，有岁月痕迹
- 气质：沧桑但坚韧，有智慧，充满人生感悟，精神不衰
- 身材：偏瘦，可能有些佝偻，但姿态依然优雅
- 服饰：唐代文人长袍，但可能更简朴、破旧，体现流放和漂泊，以灰色、棕色、淡青色为主，简朴暗淡
- 配饰：简单的头巾或帽子，可能有简单的腰带
- 手持：右手持酒壶（可能更简朴），或可能手持拐杖、书卷，或简单的行囊
- 鞋子：布鞋，可能有些破旧，适合长途漂泊

【动画帧描述】
帧1：向前行走，右脚向前迈出，左脚在后，身体略微前倾，可能有些佝偻，长袍前摆飘起，宽袖随动作摆动，右手持酒壶或拐杖，姿态优雅但有些疲惫，体现晚年诗人的坚韧
帧2：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，宽袖静止，准备下一步，保持文人行走的优雅节奏，但步伐可能稍慢
帧3：左脚向前迈出，右脚在后，完成一步，身体略微前倾，长袍后摆飘起，宽袖随动作摆动，体现坚韧的行走
帧4：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，准备下一步，步伐稍慢但坚定
帧5：右脚向前迈出，左脚在后，身体略微前倾，长袍前摆飘起，宽袖随动作摆动，与第1帧形成循环
帧6：过渡帧，回到起始状态，与第1帧无缝衔接形成循环

【技术要求】
- 每帧尺寸：48 x 70 像素
- 6帧横向排列，从左到右
- 帧与帧之间无缝衔接，形成流畅的循环行走动画
- 透明背景，无任何背景色或背景图案
- 像素艺术风格，使用最近邻插值，保持清晰锐利的边缘
- 俯视角，显示角色正面
- 色彩：简朴暗淡（灰色、棕色、淡青色为主）
```

#### 3. Walk Left/Right/Up 动画（各6帧，48x70像素）

**Walk Left 提示词**（只需将"向下"改为"向左"，"面向正面"改为"面向左侧"）：

```
请创建一张像素艺术精灵表，包含6帧walk left（向左行走）动画，横向排列在一张图片中。

【整体要求】
- 图片尺寸：288 x 70 像素（6帧 × 48像素宽 × 70像素高）
- 背景：完全透明（PNG格式，RGBA模式）
- 风格：像素艺术，简洁色彩（16-32色），清晰线条，无抗锯齿

【角色设定 - 老年时期李白】
- 角色：中国古代诗人李白，50-62岁老年男性，面容沧桑，长须（可能更白或更乱），眼神深邃，有岁月痕迹
- 气质：沧桑但坚韧，有智慧，充满人生感悟，精神不衰
- 身材：偏瘦，可能有些佝偻，但姿态依然优雅
- 服饰：唐代文人长袍，但可能更简朴、破旧，体现流放和漂泊，以灰色、棕色、淡青色为主，简朴暗淡
- 配饰：简单的头巾或帽子，可能有简单的腰带
- 手持：右手持酒壶（可能更简朴），或可能手持拐杖、书卷，或简单的行囊
- 鞋子：布鞋，可能有些破旧，适合长途漂泊

【动画帧描述】
帧1：向左行走，面向左侧，右脚向前迈出，左脚在后，身体略微向左倾斜，可能有些佝偻，长袍左侧飘起，宽袖随动作摆动，右手持酒壶或拐杖，姿态优雅但有些疲惫，体现晚年诗人的坚韧
帧2：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，宽袖静止，准备下一步，保持文人行走的优雅节奏，但步伐可能稍慢
帧3：左脚向前迈出，右脚在后，完成一步，身体略微向左倾斜，长袍右侧飘起，宽袖随动作摆动，体现坚韧的行走
帧4：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，准备下一步，步伐稍慢但坚定
帧5：右脚向前迈出，左脚在后，身体略微向左倾斜，长袍左侧飘起，宽袖随动作摆动，与第1帧形成循环
帧6：过渡帧，回到起始状态，与第1帧无缝衔接形成循环

【技术要求】
- 每帧尺寸：48 x 70 像素
- 6帧横向排列，从左到右
- 帧与帧之间无缝衔接，形成流畅的循环行走动画
- 透明背景，无任何背景色或背景图案
- 像素艺术风格，使用最近邻插值，保持清晰锐利的边缘
- 侧视角，角色面向左侧
- 色彩：简朴暗淡（灰色、棕色、淡青色为主）
```

**Walk Right 和 Walk Up** 类似，只需调整方向描述。

---

## 🌱 二、李四 → 青年李白（25-35岁）

### 📖 角色背景

**历史时期**：725-735年（游历求仕）
- 25岁离开四川，开始"仗剑去国，辞亲远游"
- 游历湖北、湖南、江苏、浙江等地
- 求仕未果，但创作了大量优秀诗作
- 生活相对自由，充满理想和抱负

**对应场景**：
- 蜀中故乡（四川）
- 江南水乡（江苏、浙江）
- 名山大川（庐山、天台山）

### 🎨 视觉特征

**外貌**：
- 25-35岁年轻男性
- 面容清秀，可能只有短须或刚留胡须
- 眼神明亮有神，充满朝气
- 年轻健壮，姿态轻盈，适合游历

**服饰**：
- 唐代文人长袍，但更轻便，适合游历
- 颜色：白色、浅蓝色、淡青色为主（清新明亮）
- 宽袖，但可能稍微收紧，便于行动
- 可能有简单的头巾或帽子，腰间可能有佩剑（体现"仗剑去国"）
- 布鞋或软底鞋，适合长途行走

**手持物品**：
- 主要：可能手持书卷、毛笔，或酒壶
- 特殊：可能腰间佩剑，体现游侠气质

**色彩氛围**：
- 主色调：白色、浅蓝色、淡青色（清新明亮）
- 辅助色：绿色、棕色（自然、活力）
- 整体：朝气、理想、自由

### 📝 AI生成提示词

#### 1. Idle 动画（12帧，48x80像素）

```
请创建一张像素艺术精灵表，包含12帧idle（站立待机）动画，横向排列在一张图片中。

【整体要求】
- 图片尺寸：576 x 80 像素（12帧 × 48像素宽 × 80像素高）
- 背景：完全透明（PNG格式，RGBA模式）
- 风格：像素艺术，简洁色彩（16-32色），清晰线条，无抗锯齿

【角色设定 - 青年时期李白】
- 角色：中国古代诗人李白，25-35岁年轻男性，面容清秀，可能只有短须或刚留胡须，眼神明亮有神，充满朝气
- 气质：潇洒不羁，意气风发，充满理想和抱负，年轻气盛
- 身材：年轻健壮，姿态轻盈，适合游历
- 服饰：唐代文人长袍，轻便适合游历，以白色、浅蓝色、淡青色为主，宽袖但稍微收紧便于行动
- 配饰：可能有简单的头巾或帽子，腰间可能有佩剑（体现"仗剑去国"的游侠气质）
- 手持：可能手持书卷、毛笔，或酒壶，体现年轻诗人的创作热情
- 鞋子：布鞋或软底鞋，适合长途行走

【动画帧描述】
帧1：站立待机，身体中心位置，轻微呼吸，胸部略微起伏，眼神明亮，姿态轻盈，充满朝气
帧2：身体略微下沉，呼吸动作，肩膀轻微起伏，长袍随呼吸轻微摆动，保持年轻潇洒的姿态
帧3：身体回到中心，可能轻微向左摆动，长袖随风轻摆，眼神可能看向远方，体现游历的向往
帧4：身体回到中心位置，可能轻微向右摆动，保持平衡，可能调整佩剑或手持物品，姿态自然
帧5：身体回到中心，呼吸动作，可能眨眼，长袍静止，准备回到起始状态，眼神依然明亮
帧6：身体略微前倾，可能看向手中的书卷或毛笔，体现年轻诗人的创作热情
帧7：身体回到中心，轻微呼吸，长袍随呼吸摆动，保持年轻潇洒的姿态
帧8：身体略微后仰，可能看向天空或远方，体现对理想的追求
帧9：身体回到中心，呼吸动作，眼神明亮，充满朝气
帧10：身体轻微摆动，长袖轻摆，保持平衡，体现年轻活力
帧11：身体回到中心，准备回到起始状态，眼神依然明亮
帧12：回到起始位置，完成一个完整的呼吸循环，与第1帧无缝衔接，形成流畅循环

【技术要求】
- 每帧尺寸：48 x 80 像素
- 12帧横向排列，从左到右
- 帧与帧之间无缝衔接，形成流畅的循环动画
- 透明背景，无任何背景色或背景图案
- 像素艺术风格，使用最近邻插值，保持清晰锐利的边缘
- 俯视角，显示角色正面
- 色彩：清新明亮（白色、浅蓝色、淡青色为主）
```

#### 2. Walk Down 动画（6帧，48x70像素）

```
请创建一张像素艺术精灵表，包含6帧walk down（向下行走）动画，横向排列在一张图片中。

【整体要求】
- 图片尺寸：288 x 70 像素（6帧 × 48像素宽 × 70像素高）
- 背景：完全透明（PNG格式，RGBA模式）
- 风格：像素艺术，简洁色彩（16-32色），清晰线条，无抗锯齿

【角色设定 - 青年时期李白】
- 角色：中国古代诗人李白，25-35岁年轻男性，面容清秀，可能只有短须或刚留胡须，眼神明亮有神，充满朝气
- 气质：潇洒不羁，意气风发，充满理想和抱负
- 身材：年轻健壮，姿态轻盈，适合游历
- 服饰：唐代文人长袍，轻便适合游历，以白色、浅蓝色、淡青色为主，宽袖但稍微收紧便于行动
- 配饰：可能有简单的头巾或帽子，腰间可能有佩剑
- 手持：可能手持书卷、毛笔，或酒壶
- 鞋子：布鞋或软底鞋，适合长途行走

【动画帧描述】
帧1：向前行走，右脚向前迈出，左脚在后，身体略微前倾，长袍前摆飘起，宽袖随动作摆动，姿态轻盈，充满朝气，体现年轻诗人的活力
帧2：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，宽袖静止，准备下一步，保持年轻潇洒的行走节奏
帧3：左脚向前迈出，右脚在后，完成一步，身体略微前倾，长袍后摆飘起，宽袖随动作摆动，体现年轻活力
帧4：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，准备下一步，保持轻盈的步伐
帧5：右脚向前迈出，左脚在后，身体略微前倾，长袍前摆飘起，宽袖随动作摆动，与第1帧形成循环
帧6：过渡帧，回到起始状态，与第1帧无缝衔接形成循环

【技术要求】
- 每帧尺寸：48 x 70 像素
- 6帧横向排列，从左到右
- 帧与帧之间无缝衔接，形成流畅的循环行走动画
- 透明背景，无任何背景色或背景图案
- 像素艺术风格，使用最近邻插值，保持清晰锐利的边缘
- 俯视角，显示角色正面
- 色彩：清新明亮（白色、浅蓝色、淡青色为主）
```

---

## 🏛️ 三、王五 → 中年李白（35-50岁）

### 📖 角色背景

**历史时期**：735-750年（长安岁月）
- 742年，42岁，被召入长安，供奉翰林
- 在长安期间，创作了大量宫廷诗
- 744年，离开长安，继续游历
- 生活相对稳定，但政治理想未实现

**对应场景**：
- 长安皇宫（742-744年）
- 长安市集（742-744年）
- 梁园（河南，744年后）

### 🎨 视觉特征

**外貌**：
- 35-50岁成熟男性
- 面容成熟，长山羊胡（下巴和上唇的胡须）
- 眼神深邃，有文人气质
- 中等偏瘦，文人身材，姿态优雅

**服饰**：
- 唐代文人长袍，可能更华丽，体现宫廷身份
- 颜色：以白色为主，但可能有淡黄色、淡金色装饰（华丽、宫廷）
- 宽袖（大袖），袖口宽松，体现唐代服饰特点
- 可能有更精致的头巾或帽子，可能有腰带或束带
- 布鞋或软底鞋，但可能更精致

**手持物品**：
- 主要：右手持酒壶（葫芦形或圆形酒壶），体现诗人好酒的特点
- 备选：可能手持毛笔、书卷，或宫廷物品

**色彩氛围**：
- 主色调：白色、淡黄色、淡金色（华丽、宫廷）
- 辅助色：红色、棕色（繁华、生活）
- 整体：繁华、理想、追求

### 📝 AI生成提示词

#### 1. Idle 动画（12帧，48x80像素）

```
请创建一张像素艺术精灵表，包含12帧idle（站立待机）动画，横向排列在一张图片中。

【整体要求】
- 图片尺寸：576 x 80 像素（12帧 × 48像素宽 × 80像素高）
- 背景：完全透明（PNG格式，RGBA模式）
- 风格：像素艺术，简洁色彩（16-32色），清晰线条，无抗锯齿

【角色设定 - 中年时期李白】
- 角色：中国古代诗人李白，35-50岁成熟男性，面容成熟，长山羊胡（下巴和上唇的胡须），眼神深邃，有文人气质
- 气质：成熟稳重，有诗仙风范，潇洒不羁，豪放不羁，但可能有些疲惫或无奈（体现政治理想未实现）
- 身材：中等偏瘦，文人身材，姿态优雅
- 服饰：唐代文人长袍，可能更华丽，体现宫廷身份，以白色为主，但可能有淡黄色、淡金色装饰，宽袖（大袖），袖口宽松，体现唐代服饰特点
- 配饰：可能有更精致的头巾或帽子，可能有腰带或束带，体现宫廷气息
- 手持：右手持酒壶（葫芦形或圆形酒壶），体现诗人好酒的特点，或可能手持毛笔、书卷
- 鞋子：布鞋或软底鞋，但可能更精致

【动画帧描述】
帧1：站立待机，身体中心位置，轻微呼吸，胸部略微起伏，右手持酒壶自然下垂，眼神深邃，姿态优雅，体现成熟诗人的气质
帧2：身体略微下沉，呼吸动作，肩膀轻微起伏，长袍随呼吸轻微摆动，保持优雅姿态，可能有些疲惫感
帧3：身体回到中心，可能轻微向左摆动，长袖随风轻摆，文人风范，眼神可能看向远方，体现对理想的追求
帧4：身体回到中心位置，可能轻微向右摆动，保持平衡，手持酒壶，姿态自然，体现诗仙的潇洒
帧5：身体回到中心，呼吸动作，可能眨眼，长袍静止，准备回到起始状态，眼神深邃，有思考的痕迹
帧6：身体略微前倾，可能看向手中的酒壶或毛笔，体现诗人的创作状态
帧7：身体回到中心，轻微呼吸，长袍随呼吸摆动，保持优雅姿态
帧8：身体略微后仰，可能看向天空或远方，体现对理想的追求
帧9：身体回到中心，呼吸动作，眼神深邃，有诗仙风范
帧10：身体轻微摆动，长袖轻摆，保持平衡，体现成熟稳重
帧11：身体回到中心，准备回到起始状态，眼神依然深邃
帧12：回到起始位置，完成一个完整的呼吸循环，与第1帧无缝衔接，形成流畅循环

【技术要求】
- 每帧尺寸：48 x 80 像素
- 12帧横向排列，从左到右
- 帧与帧之间无缝衔接，形成流畅的循环动画
- 透明背景，无任何背景色或背景图案
- 像素艺术风格，使用最近邻插值，保持清晰锐利的边缘
- 俯视角，显示角色正面
- 色彩：华丽但不失文雅（白色、淡黄色、淡金色为主）
```

#### 2. Walk Down 动画（6帧，48x70像素）

```
请创建一张像素艺术精灵表，包含6帧walk down（向下行走）动画，横向排列在一张图片中。

【整体要求】
- 图片尺寸：288 x 70 像素（6帧 × 48像素宽 × 70像素高）
- 背景：完全透明（PNG格式，RGBA模式）
- 风格：像素艺术，简洁色彩（16-32色），清晰线条，无抗锯齿

【角色设定 - 中年时期李白】
- 角色：中国古代诗人李白，35-50岁成熟男性，面容成熟，长山羊胡（下巴和上唇的胡须），眼神深邃，有文人气质
- 气质：成熟稳重，有诗仙风范，潇洒不羁，豪放不羁
- 身材：中等偏瘦，文人身材，姿态优雅
- 服饰：唐代文人长袍，可能更华丽，体现宫廷身份，以白色为主，但可能有淡黄色、淡金色装饰，宽袖（大袖），袖口宽松
- 配饰：可能有更精致的头巾或帽子，可能有腰带或束带
- 手持：右手持酒壶（葫芦形或圆形酒壶），体现诗人好酒的特点
- 鞋子：布鞋或软底鞋，但可能更精致

【动画帧描述】
帧1：向前行走，右脚向前迈出，左脚在后，身体略微前倾，长袍前摆飘起，宽袖随动作摆动，右手持酒壶，姿态优雅，体现成熟诗人的风度
帧2：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，宽袖静止，准备下一步，保持文人行走的优雅节奏
帧3：左脚向前迈出，右脚在后，完成一步，身体略微前倾，长袍后摆飘起，宽袖随动作摆动，体现优雅风度
帧4：双脚并拢，身体略微下沉，重心在中间，长袍自然下垂，准备下一步，保持优雅节奏
帧5：右脚向前迈出，左脚在后，身体略微前倾，长袍前摆飘起，宽袖随动作摆动，与第1帧形成循环
帧6：过渡帧，回到起始状态，与第1帧无缝衔接形成循环

【技术要求】
- 每帧尺寸：48 x 70 像素
- 6帧横向排列，从左到右
- 帧与帧之间无缝衔接，形成流畅的循环行走动画
- 透明背景，无任何背景色或背景图案
- 像素艺术风格，使用最近邻插值，保持清晰锐利的边缘
- 俯视角，显示角色正面
- 色彩：华丽但不失文雅（白色、淡黄色、淡金色为主）
```

---

## 🔧 第二部分：后端配置改造

### 📝 更新 `backend/agents.py`

需要将NPC_ROLES配置更新为李白各时期的设定：

```python
# NPC角色配置 - 李白三个时期
NPC_ROLES = {
    "张三": {
        "title": "老年李白",
        "location": "流放夜郎/江陵/当涂",
        "activity": "漂泊创作",
        "personality": "沧桑但坚韧,有智慧,充满人生感悟,精神不衰",
        "expertise": "晚年诗歌创作、人生感悟、流放经历、诗歌艺术",
        "style": "深沉内敛,充满人生智慧,偶尔流露出对往昔的回忆,语言简练有力",
        "hobbies": "饮酒作诗、思考人生、回忆往昔、创作诗歌",
        "period": "老年时期（50-62岁，750-762年）",
        "background": "安史之乱后流放夜郎,遇赦后继续漂泊,晚年生活困顿但创作不辍"
    },
    "李四": {
        "title": "青年李白",
        "location": "蜀中故乡/江南水乡/名山大川",
        "activity": "游历求仕",
        "personality": "潇洒不羁,意气风发,充满理想和抱负,年轻气盛",
        "expertise": "诗歌创作、游历见闻、求仕经历、名山大川",
        "style": "豪放不羁,充满朝气,语言激昂,喜欢用比喻和夸张",
        "hobbies": "游历四方、饮酒作诗、结交朋友、探索名山大川",
        "period": "青年时期（25-35岁，725-735年）",
        "background": "25岁离开四川,开始'仗剑去国,辞亲远游',游历各地求仕未果但创作丰富"
    },
    "王五": {
        "title": "中年李白",
        "location": "长安皇宫/长安市集/梁园",
        "activity": "宫廷创作",
        "personality": "成熟稳重,有诗仙风范,潇洒不羁,但可能有些疲惫或无奈",
        "expertise": "宫廷诗歌、政治理想、诗歌艺术、文人雅集",
        "style": "成熟优雅,有宫廷气息,语言华丽但不失文雅,偶尔流露出对理想的追求",
        "hobbies": "饮酒作诗、参加诗会、宫廷创作、文人雅集",
        "period": "中年时期（35-50岁，735-750年）",
        "background": "42岁入长安供奉翰林,在长安期间创作大量宫廷诗,但政治理想未实现"
    }
}
```

### 📝 更新系统提示词生成函数

```python
def create_system_prompt(name: str, role: Dict[str, str]) -> str:
    """创建NPC的系统提示词"""
    return f"""你是中国古代诗人李白（{role['period']}）。

【角色设定】
- 时期: {role['period']}
- 历史背景: {role['background']}
- 性格: {role['personality']}
- 专长: {role['expertise']}
- 说话风格: {role['style']}
- 爱好: {role['hobbies']}
- 当前位置: {role['location']}
- 当前活动: {role['activity']}

【行为准则】
1. 保持角色一致性,用第一人称"我"回答
2. 回复简洁自然,控制在30-50字以内
3. 可以适当提及你的生活经历和诗歌创作
4. 对玩家友好,但保持诗人的气质和风范
5. 可以引用或提及你的代表作品
6. 偶尔展现一些个性化的小习惯或口头禅

【对话示例】
玩家: "你好,你是做什么的?"
{name}: "在下李白,字太白。{role['background']}。你愿意听我吟诗一首吗?"

玩家: "最近在做什么?"
{name}: "最近在{role['activity']},创作了一些诗作。你对诗歌感兴趣吗?"

【重要】
- 不要说"我是AI"或"我是语言模型"
- 要像真实的诗人李白一样自然对话
- 可以表达情绪(豪放、感慨、思考等)
- 回复要有诗人的气质,不要太机械
- 可以适当引用李白的诗句或创作风格
"""
```

---

## 🎮 第三部分：场景匹配

### 📍 场景分配建议

根据 `LIBAI_BACKGROUND_GUIDE.md`，建议的场景分配：

#### 张三（老年李白）
- **主要场景**：流放夜郎（贵州，757-759年）
- **备选场景**：江陵（湖北，759年后）、当涂（安徽，762年）
- **场景特征**：荒凉萧瑟，灰色、棕色、青色为主

#### 李四（青年李白）
- **主要场景**：蜀中故乡（四川）
- **备选场景**：江南水乡（江苏、浙江）、名山大川（庐山、天台山）
- **场景特征**：清新明亮，绿色、白色、青色为主

#### 王五（中年李白）
- **主要场景**：长安皇宫（742-744年）
- **备选场景**：长安市集（742-744年）、梁园（河南，744年后）
- **场景特征**：繁华华丽，红色、黄色、金色为主

---

## 📋 第四部分：实施步骤

### 步骤1：生成角色精灵图

1. **使用AI工具生成**：
   - 按照上面的提示词，为每个角色生成：
     - Idle动画（12帧，48x80）
     - Walk Down（6帧，48x70）
     - Walk Left（6帧，48x70）
     - Walk Right（6帧，48x70）
     - Walk Up（6帧，48x70）

2. **合成精灵表**：
   - 使用 `AI_CHARACTER_REDESIGN_GUIDE.md` 中的 `create_sprite_sheet.py` 脚本
   - 按照 `character_2.png` 的布局合成完整精灵表

3. **文件命名**：
   - 张三（老年李白）：`character_elder_libai.png`
   - 李四（青年李白）：`character_youth_libai.png`
   - 王五（中年李白）：`character_middle_libai.png`

### 步骤2：更新Godot场景

1. **更新NPC场景**：
   - 打开 `helloagents-ai-town/scenes/npc.tscn`
   - 为每个NPC指定对应的精灵图资源

2. **更新场景文件**：
   - 在 `main.tscn` 中，为每个NPC实例指定正确的精灵图

### 步骤3：更新后端配置

1. **更新 `backend/agents.py`**：
   - 替换 `NPC_ROLES` 配置
   - 更新 `create_system_prompt` 函数

2. **测试对话**：
   - 启动后端服务
   - 测试每个NPC的对话是否符合角色设定

### 步骤4：场景背景更新

1. **生成或选择背景**：
   - 使用 `LIBAI_BACKGROUND_GUIDE.md` 中的提示词生成背景
   - 或从资源网站搜索合适的背景

2. **更新场景背景**：
   - 在Godot中替换场景背景图片
   - 确保背景与角色时期匹配

---

## ✅ 检查清单

### 视觉形象
- [ ] 张三（老年李白）精灵图已生成并合成
- [ ] 李四（青年李白）精灵图已生成并合成
- [ ] 王五（中年李白）精灵图已生成并合成
- [ ] 所有精灵图尺寸正确（Idle: 48x80, Walk: 48x70）
- [ ] 所有精灵图背景透明
- [ ] 精灵图风格统一（像素艺术，16-32色）

### 后端配置
- [ ] `NPC_ROLES` 配置已更新
- [ ] `create_system_prompt` 函数已更新
- [ ] 后端服务可以正常启动
- [ ] 每个NPC的对话测试通过

### 场景匹配
- [ ] 场景背景已生成或选择
- [ ] 场景背景与角色时期匹配
- [ ] 场景背景已更新到Godot项目

### 游戏测试
- [ ] 角色在游戏中显示正确
- [ ] 角色动画流畅
- [ ] 角色对话符合设定
- [ ] 场景与角色匹配

---

## 🎯 快速参考

### 角色特征对比

| 特征 | 青年李白（李四） | 中年李白（王五） | 老年李白（张三） |
|------|----------------|----------------|----------------|
| **年龄** | 25-35岁 | 35-50岁 | 50-62岁 |
| **面容** | 清秀，明亮 | 成熟，深邃 | 沧桑，有岁月痕迹 |
| **胡须** | 短须或刚留 | 长山羊胡 | 长须（可能更白或更乱） |
| **眼神** | 明亮有神 | 深邃 | 深邃，有智慧 |
| **身材** | 年轻健壮 | 中等偏瘦 | 偏瘦，可能有些佝偻 |
| **服饰颜色** | 白色、浅蓝色、淡青色 | 白色、淡黄色、淡金色 | 灰色、棕色、淡青色 |
| **服饰风格** | 轻便，适合游历 | 华丽，体现宫廷 | 简朴，破旧 |
| **手持物品** | 书卷、毛笔、酒壶 | 酒壶、毛笔、书卷 | 酒壶、拐杖、行囊 |
| **气质** | 潇洒不羁，意气风发 | 成熟稳重，诗仙风范 | 沧桑但坚韧，有智慧 |
| **场景** | 蜀中故乡、江南水乡 | 长安皇宫、长安市集 | 流放夜郎、江陵、当涂 |

---

## 💡 提示和建议

1. **保持一致性**：
   - 使用相同的AI工具和参数生成所有角色
   - 保持相同的像素艺术风格和色彩调色板

2. **迭代优化**：
   - 如果生成效果不理想，可以调整提示词
   - 可以先生成单帧测试，满意后再批量生成

3. **测试验证**：
   - 在Godot中测试角色动画是否流畅
   - 测试角色对话是否符合设定

4. **场景匹配**：
   - 确保场景背景与角色时期匹配
   - 可以使用 `LIBAI_BACKGROUND_GUIDE.md` 中的提示词生成背景

---

**祝你改造顺利！** 🎭

如果需要调整提示词或遇到问题，可以继续询问。

